---
phase: 02-development-tooling
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - eslint.config.mjs
  - .prettierrc
  - .prettierignore
  - .vscode/settings.json
  - .vscode/extensions.json
  - .gitignore
  - App.tsx
  - index.tsx
  - types.ts
  - vite.config.ts
  - components/FileUpload.tsx
  - components/LoadingState.tsx
  - components/Settings.tsx
  - components/TranscriptView.tsx
  - services/cryptoService.ts
  - services/geminiService.ts
autonomous: true

must_haves:
  truths:
    - "ESLint 9 flat config with TypeScript, React, React Hooks, and jsx-a11y plugins is configured and catches errors"
    - "Prettier with Tailwind plugin formats code consistently using project style (2-space indent, single quotes, semicolons, 80-char width, ES5 trailing commas)"
    - "Editor auto-fixes ESLint errors and formats with Prettier on save in Cursor/VS Code"
    - "Entire codebase is formatted consistently after initial formatting pass"
  artifacts:
    - path: "eslint.config.mjs"
      provides: "ESLint 9 flat config with all plugins"
      contains: "eslint-config-prettier"
    - path: ".prettierrc"
      provides: "Prettier configuration"
      contains: "prettier-plugin-tailwindcss"
    - path: ".prettierignore"
      provides: "Prettier ignore patterns"
      contains: "dist"
    - path: ".vscode/settings.json"
      provides: "Editor format-on-save and ESLint auto-fix"
      contains: "formatOnSave"
    - path: ".vscode/extensions.json"
      provides: "Recommended extensions"
      contains: "esbenp.prettier-vscode"
  key_links:
    - from: "eslint.config.mjs"
      to: "package.json"
      via: "devDependencies providing ESLint plugins"
      pattern: "eslint.*plugin"
    - from: ".vscode/settings.json"
      to: "eslint.config.mjs"
      via: "ESLint extension reads flat config"
      pattern: "source.fixAll.eslint"
---

<objective>
Install and configure ESLint 9 (flat config) with TypeScript, React, React Hooks, and accessibility plugins, plus Prettier with the Tailwind plugin. Set up editor integration for Cursor/VS Code with format-on-save and ESLint auto-fix on save. Run initial formatting pass on the entire codebase.

Purpose: Establishes the lint + format foundation that all subsequent plans and phases depend on. Code quality tooling must exist before strict mode, pre-commit hooks, or CI can be meaningful.
Output: ESLint config, Prettier config, VS Code settings, and a consistently formatted codebase.
</objective>

<execution_context>
@/Users/david.cogan@postman.com/.claude/get-shit-done/workflows/execute-plan.md
@/Users/david.cogan@postman.com/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-development-tooling/02-CONTEXT.md
@.planning/phases/02-development-tooling/02-RESEARCH.md
@package.json
@tsconfig.json
@.gitignore
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dev dependencies and create ESLint + Prettier configs</name>
  <files>
    package.json
    eslint.config.mjs
    .prettierrc
    .prettierignore
  </files>
  <action>
    1. Install all dev dependencies with exact pinning (CRITICAL: use --save-exact and pin ESLint to 9.39.2, NOT 10):
    ```bash
    npm install --save-dev --save-exact eslint@9.39.2 @eslint/js@9.39.2 typescript-eslint@8.54.0 prettier@3.8.1 eslint-plugin-react@7.37.5 eslint-plugin-react-hooks@7.0.1 eslint-plugin-jsx-a11y@6.10.2 eslint-config-prettier@10.1.8 prettier-plugin-tailwindcss@0.7.2 globals@17.3.0
    ```

    2. Create `eslint.config.mjs` with this exact structure (order matters -- Prettier MUST be last):
    ```javascript
    import eslint from '@eslint/js';
    import tseslint from 'typescript-eslint';
    import reactPlugin from 'eslint-plugin-react';
    import reactHooks from 'eslint-plugin-react-hooks';
    import jsxA11y from 'eslint-plugin-jsx-a11y';
    import eslintConfigPrettier from 'eslint-config-prettier/flat';
    import globals from 'globals';

    export default [
      { ignores: ['dist/**', 'node_modules/**', '.netlify/**', 'netlify/edge-functions/**'] },
      eslint.configs.recommended,
      ...tseslint.configs.recommended,
      {
        ...reactPlugin.configs.flat.recommended,
        settings: { react: { version: 'detect' } },
      },
      reactPlugin.configs.flat['jsx-runtime'],
      {
        plugins: { 'react-hooks': reactHooks },
        rules: {
          'react-hooks/rules-of-hooks': 'error',
          'react-hooks/exhaustive-deps': 'warn',
        },
      },
      jsxA11y.flatConfigs.recommended,
      {
        files: ['**/*.{ts,tsx}'],
        languageOptions: {
          globals: { ...globals.browser },
        },
        rules: {
          '@typescript-eslint/no-unused-vars': ['error', {
            argsIgnorePattern: '^_',
            varsIgnorePattern: '^_',
          }],
        },
      },
      eslintConfigPrettier,
    ];
    ```

    3. Create `.prettierrc` (locked decisions: 2-space indent, single quotes, semicolons, 80-char width, ES5 trailing commas):
    ```json
    {
      "semi": true,
      "singleQuote": true,
      "tabWidth": 2,
      "trailingComma": "es5",
      "printWidth": 80,
      "plugins": ["prettier-plugin-tailwindcss"]
    }
    ```

    4. Create `.prettierignore`:
    ```
    dist
    node_modules
    .netlify
    package-lock.json
    *.min.js
    ```

    5. Add npm scripts to package.json (preserve existing scripts):
    ```json
    "lint": "eslint .",
    "lint:fix": "eslint . --fix",
    "format": "prettier --write .",
    "format:check": "prettier --check ."
    ```
  </action>
  <verify>
    Run `npx eslint --print-config App.tsx | head -20` to confirm ESLint loads config successfully.
    Run `npx prettier --check .prettierrc` to confirm Prettier config is valid.
    Run `npm run lint 2>&1 | tail -5` to confirm ESLint runs (errors expected at this stage -- just confirm it runs).
  </verify>
  <done>
    ESLint 9.39.2 installed with flat config, Prettier 3.8.1 installed with Tailwind plugin, both configs created, npm scripts added. `npm run lint` and `npm run format:check` execute without config errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Set up editor integration and update .gitignore</name>
  <files>
    .vscode/settings.json
    .vscode/extensions.json
    .gitignore
  </files>
  <action>
    1. Update `.gitignore` to allow VS Code project settings but keep personal files ignored. Replace the `.vscode/` line with:
    ```
    # Editor (allow project settings, ignore personal files)
    .vscode/*
    !.vscode/settings.json
    !.vscode/extensions.json
    .idea/
    ```

    2. Create `.vscode/settings.json`:
    ```json
    {
      "editor.formatOnSave": true,
      "editor.defaultFormatter": "esbenp.prettier-vscode",
      "editor.codeActionsOnSave": {
        "source.fixAll.eslint": "explicit"
      },
      "[typescript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode"
      },
      "[typescriptreact]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode"
      }
    }
    ```

    3. Create `.vscode/extensions.json`:
    ```json
    {
      "recommendations": [
        "esbenp.prettier-vscode",
        "dbaeumer.vscode-eslint"
      ]
    }
    ```
  </action>
  <verify>
    Confirm `.vscode/settings.json` and `.vscode/extensions.json` exist with correct content.
    Run `git check-ignore .vscode/settings.json` -- should return empty (file is NOT ignored).
    Run `git check-ignore .vscode/extensions.json` -- should return empty (file is NOT ignored).
  </verify>
  <done>
    VS Code/Cursor editor settings configured for format-on-save and ESLint auto-fix on save. Extension recommendations include Prettier and ESLint. `.gitignore` updated to commit project-level VS Code settings while ignoring personal files.
  </done>
</task>

<task type="auto">
  <name>Task 3: Run initial formatting and lint-fix pass on entire codebase</name>
  <files>
    App.tsx
    index.tsx
    types.ts
    vite.config.ts
    components/FileUpload.tsx
    components/LoadingState.tsx
    components/Settings.tsx
    components/TranscriptView.tsx
    services/cryptoService.ts
    services/geminiService.ts
  </files>
  <action>
    1. Run Prettier on entire codebase to establish consistent formatting:
    ```bash
    npx prettier --write .
    ```

    2. Run ESLint auto-fix to resolve any auto-fixable lint issues:
    ```bash
    npx eslint . --fix
    ```

    3. If ESLint reports remaining errors that cannot be auto-fixed, review each error:
       - If it's a legitimate code quality issue that can be fixed without changing behavior, fix it.
       - If it's a false positive or requires significant refactoring, add a targeted `// eslint-disable-next-line` comment with the specific rule name (never use bare `// eslint-disable`).
       - Goal: `npm run lint` passes with zero errors after this task.

    4. Run Prettier check to confirm all files are formatted:
    ```bash
    npx prettier --check .
    ```

    5. Run the build to confirm formatting/lint changes didn't break anything:
    ```bash
    npm run build
    ```
  </action>
  <verify>
    `npm run lint` exits with code 0 (no errors).
    `npm run format:check` exits with code 0 (all files formatted).
    `npm run build` succeeds.
  </verify>
  <done>
    Entire codebase is consistently formatted with Prettier and passes ESLint with zero errors. Build still succeeds. This is the baseline all future code changes will maintain.
  </done>
</task>

</tasks>

<verification>
1. `npm run lint` -- exits 0, no ESLint errors
2. `npm run format:check` -- exits 0, all files formatted
3. `npm run build` -- exits 0, build succeeds
4. `cat eslint.config.mjs` -- contains all required plugins (react, react-hooks, jsx-a11y, typescript-eslint, prettier)
5. `cat .prettierrc` -- matches locked formatting decisions
6. `cat .vscode/settings.json` -- contains formatOnSave and ESLint auto-fix
7. `git check-ignore .vscode/settings.json` -- returns empty (not ignored)
</verification>

<success_criteria>
- ESLint 9.39.2 with flat config catches TypeScript, React, React Hooks, and accessibility errors
- Prettier with Tailwind plugin enforces consistent formatting (2-space, single quotes, semis, 80-char, ES5 trailing commas)
- VS Code/Cursor format-on-save and ESLint auto-fix on save are configured
- Entire codebase passes both lint and format checks
- Build still succeeds after all changes
</success_criteria>

<output>
After completion, create `.planning/phases/02-development-tooling/02-01-SUMMARY.md`
</output>
