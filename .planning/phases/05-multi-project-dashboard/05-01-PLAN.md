---
phase: 05-multi-project-dashboard
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/features/dashboard/DashboardPage.tsx
  - src/features/dashboard/components/ProjectCard.tsx
  - src/features/dashboard/components/ConfirmDialog.tsx
autonomous: true

must_haves:
  truths:
    - 'User sees a responsive grid of project cards on the landing page'
    - 'User can rename a project by clicking the name, typing a new name, and pressing Enter'
    - 'User can delete a project via a delete button that opens a confirmation dialog'
    - 'Confirmation dialog traps focus, has backdrop, and closes on Escape'
    - 'Empty state shows a friendly message with a call-to-action button when no projects exist'
    - 'Projects are sorted by most recently updated first'
  artifacts:
    - path: 'src/features/dashboard/components/ProjectCard.tsx'
      provides: 'Individual project card with inline rename, delete button, status badge, metadata'
      exports: ['default']
    - path: 'src/features/dashboard/components/ConfirmDialog.tsx'
      provides: 'Reusable confirmation dialog using native <dialog> with showModal()'
      exports: ['default']
    - path: 'src/features/dashboard/DashboardPage.tsx'
      provides: 'Dashboard landing page with responsive grid, empty state, create button'
      exports: ['default']
  key_links:
    - from: 'src/features/dashboard/components/ProjectCard.tsx'
      to: 'ProjectsContext'
      via: 'useProjects().updateProject for rename, useProjects().removeProject for delete'
      pattern: "useProjects\\(\\)"
    - from: 'src/features/dashboard/components/ProjectCard.tsx'
      to: 'src/features/dashboard/components/ConfirmDialog.tsx'
      via: 'ConfirmDialog rendered inside ProjectCard for delete confirmation'
      pattern: 'ConfirmDialog'
    - from: 'src/features/dashboard/components/ConfirmDialog.tsx'
      to: 'HTMLDialogElement'
      via: 'useRef + showModal() imperative API'
      pattern: 'showModal'
    - from: 'src/features/dashboard/DashboardPage.tsx'
      to: 'src/features/dashboard/components/ProjectCard.tsx'
      via: 'ProjectCard rendered for each project in the grid'
      pattern: 'ProjectCard'
---

<objective>
Build the multi-project dashboard UI with project cards, inline rename, delete confirmation, and responsive grid layout.

Purpose: Fulfills PROJ-01 (dashboard landing page with project grid), PROJ-03 (rename project), and PROJ-04 (delete project with confirmation). Transforms the Phase 4 placeholder DashboardPage into the full-featured project management UI.

Output: Three components -- ConfirmDialog (reusable native dialog), ProjectCard (card with inline rename + delete), and enhanced DashboardPage (responsive grid + empty state).
</objective>

<execution_context>
@/Users/david.cogan@postman.com/.claude/get-shit-done/workflows/execute-plan.md
@/Users/david.cogan@postman.com/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase 5 research (patterns, anti-patterns, code examples)

@.planning/phases/05-multi-project-dashboard/05-RESEARCH.md

# Existing dashboard placeholder to enhance

@src/features/dashboard/DashboardPage.tsx

# ProjectsContext -- provides useProjects() with createProject, updateProject, removeProject

@src/contexts/ProjectsContext.tsx

# Storage types -- ProjectMetadata, ProjectStatus, FileInfo

@src/services/storageService.types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ConfirmDialog and ProjectCard components</name>
  <files>
    src/features/dashboard/components/ConfirmDialog.tsx
    src/features/dashboard/components/ProjectCard.tsx
  </files>
  <action>
**ConfirmDialog.tsx** -- Create a reusable confirmation dialog component using the native HTML `<dialog>` element:

- Props interface: `{ open: boolean; title: string; message: string; confirmLabel?: string; cancelLabel?: string; onConfirm: () => void; onCancel: () => void; variant?: 'danger' | 'default' }`
- Use `useRef<HTMLDialogElement>` and a `useEffect` that calls `dialogRef.current.showModal()` when `open` transitions to true and `dialogRef.current.close()` when it transitions to false. CRITICAL: Do NOT use the `open` attribute directly on `<dialog>` -- it must use the imperative `showModal()` API for focus trapping and backdrop.
- Handle the `onCancel` event on the `<dialog>` element (fires on Escape key press).
- Style with Tailwind: `rounded-xl border-0 p-0 shadow-xl backdrop:bg-black/50` on dialog. Inner container `w-80 p-6`. Title as `text-lg font-semibold text-slate-900`. Message as `text-sm text-slate-600 mb-6`. Buttons in a `flex justify-end gap-3` row.
- Cancel button: `rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50`
- Confirm button: When `variant === 'danger'`, use `bg-red-600 hover:bg-red-700 text-white`. When default, use `bg-indigo-600 hover:bg-indigo-700 text-white`. Both: `rounded-lg px-4 py-2 text-sm font-medium`.
- Default export.

**ProjectCard.tsx** -- Create a project card component with inline rename, delete action, and click-to-navigate:

- Props: `{ project: ProjectMetadata }` (import `ProjectMetadata` from `@/services/storageService.types`)
- Use `useNavigate()` from react-router for card click navigation to `/project/${project.id}`
- Use `useProjects()` from `@/contexts/ProjectsContext` for `updateProject` and `removeProject`

**Inline rename** (click-to-edit on the project name):

- Local state: `editing: boolean`, `draft: string`, `inputRef: useRef<HTMLInputElement>`
- When NOT editing: render a `<span>` with the project name. Double-click on the name (or click a small pencil icon button) enters edit mode.
- When editing: render a controlled `<input>` with the draft value. `useEffect` that focuses and selects the input text when `editing` becomes true.
- `handleSave`: trim the draft. If empty or unchanged, revert to original name via `setDraft(project.name)`. If valid and changed, call `updateProject({ ...project, name: trimmed, updatedAt: new Date().toISOString() })`.
- Key handlers: Enter saves, Escape cancels (revert draft and set editing=false), blur saves.
- The rename input should use `onClick={(e) => e.stopPropagation()}` to prevent card navigation while editing.

**Delete action:**

- Local state: `confirmDelete: boolean`
- Delete button (trash icon SVG): positioned in the card, with `onClick` that calls `e.stopPropagation()` then sets `confirmDelete(true)`.
- Render `<ConfirmDialog>` with `open={confirmDelete}`, title "Delete Project", message including `project.name`, confirmLabel "Delete", variant "danger".
- `onConfirm` calls `removeProject(project.id)` and sets `confirmDelete(false)`.
- `onCancel` sets `confirmDelete(false)`.

**Card layout:**

- Outer div: `rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition-all hover:border-indigo-200 hover:shadow-md cursor-pointer`
- Card body is a clickable area (entire card navigates to project on click, except rename input and delete button).
- Show: project name (with inline rename), date (`new Date(project.updatedAt).toLocaleDateString()`), segment count (`{project.segmentCount} segments`), and status badge.
- Status badge: use a local `StatusBadge` component or inline styles. Map `ProjectStatus` to colors: completed -> `bg-green-100 text-green-700`, error -> `bg-red-100 text-red-700`, uploading -> `bg-blue-100 text-blue-700`, processing -> `bg-amber-100 text-amber-700`, idle -> `bg-slate-100 text-slate-600`.
- Action buttons row at top-right: pencil icon (enter rename mode) + trash icon (trigger delete).
- Pencil and trash icons: `h-4 w-4 text-slate-400 hover:text-indigo-600` and `hover:text-red-600` respectively. Use inline SVGs.
- `aria-label` on delete button: `Delete ${project.name}`.
- Default export.
  </action>
  <verify>
- `npx tsc --noEmit` passes with zero errors
- `npx eslint src/features/dashboard/components/ConfirmDialog.tsx src/features/dashboard/components/ProjectCard.tsx` passes
- Both files exist and export default components
  </verify>
  <done>
- ConfirmDialog uses showModal() imperative API (not open attribute), handles Escape via onCancel, has danger variant styling
- ProjectCard renders project metadata with status badge, supports inline rename with Enter/Escape/blur, has delete button that opens ConfirmDialog
- Both components compile with strict TypeScript
  </done>
  </task>

<task type="auto">
  <name>Task 2: Enhance DashboardPage with responsive grid, ProjectCard integration, and empty state</name>
  <files>
    src/features/dashboard/DashboardPage.tsx
  </files>
  <action>
Rewrite `DashboardPage.tsx` to use the new ProjectCard component and responsive grid layout:

**Imports:**

- `useNavigate` from react-router
- `useProjects` from `@/contexts/ProjectsContext`
- `ProjectCard` from `./components/ProjectCard`

**Sort projects:**

- Sort the `state.projects` array by `updatedAt` descending (most recently updated first). Use `[...state.projects].sort((a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime())`.

**Layout structure:**

1. **Hero section** (keep existing): "Turn Interviews into Text Instantly" heading with subtitle. Keep the `animate-fade-in` class.
2. **"New Transcription" button** (keep existing): navigates to `/project/new`. Keep current styling.
3. **Projects section** (replace current list):
   - If projects exist: render section heading "Recent Projects" (keep), then a responsive grid: `<div className="grid w-full max-w-4xl grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">`. Note the max-width increases from `max-w-2xl` to `max-w-4xl` to accommodate the grid. Map sorted projects to `<ProjectCard key={project.id} project={project} />`.
   - If no projects: render an enhanced empty state (replace current minimal empty state):
     - Container: `flex flex-col items-center justify-center rounded-xl border-2 border-dashed border-slate-300 py-16 text-center w-full max-w-4xl`
     - Microphone or document icon SVG (slate-400, h-12 w-12, mb-4)
     - Heading: "No projects yet" (text-lg font-semibold text-slate-700 mb-2)
     - Subtitle: "Upload an audio or video file to get started with your first transcription." (text-sm text-slate-500 mb-6)
     - CTA button: "New Transcription" navigates to `/project/new`. Same styling as the main New Transcription button.

**Remove** the old vertical list rendering (the `space-y-3` div with inline status badge logic). Replace entirely with the grid + ProjectCard approach.

**Keep** the overall page structure: centered flex column, hero on top, button below hero, projects section below button.
</action>
<verify>

- `npx tsc --noEmit` passes with zero errors
- `npx eslint src/features/dashboard/DashboardPage.tsx` passes
- `npm run build` succeeds
  </verify>
  <done>
- Dashboard renders a responsive grid of ProjectCard components (1 col mobile, 2 tablet, 3 desktop)
- Projects sorted by updatedAt descending
- Enhanced empty state with icon, heading, subtitle, and CTA button when no projects exist
- Grid max-width is max-w-4xl to accommodate card layout
- Build passes with zero TypeScript and ESLint errors
  </done>
  </task>

</tasks>

<verification>
1. `npm run build` passes with zero errors
2. `npx tsc --noEmit` reports zero type errors
3. `npx eslint src/features/dashboard/` passes
4. Three new/modified files exist: ConfirmDialog.tsx, ProjectCard.tsx, DashboardPage.tsx
5. ProjectCard imports and uses ConfirmDialog
6. DashboardPage imports and renders ProjectCard in a grid
7. No direct storageService imports in DashboardPage or ProjectCard (only via useProjects context)
</verification>

<success_criteria>

- Dashboard page shows responsive grid of project cards (1/2/3 columns by breakpoint)
- Each card shows name, date, segment count, and status badge
- Inline rename: click pencil -> input appears, Enter saves, Escape cancels, blur saves, empty rejects
- Delete: trash icon -> confirmation dialog with "danger" variant, Confirm deletes, Cancel/Escape dismisses
- Empty state shows icon + message + CTA button
- Projects sorted by updatedAt descending
- Zero TypeScript errors, zero ESLint errors, build passes
  </success_criteria>

<output>
After completion, create `.planning/phases/05-multi-project-dashboard/05-01-SUMMARY.md`
</output>
